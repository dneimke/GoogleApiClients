{"ts":1348020859320,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1348020852093,"patch":[[{"diffs":[[1,"<!--\r\nAPIs\r\n    Console     https://code.google.com/apis/console\r\n    Google+     https://developers.google.com/+/api/\r\n    Drive       https://developers.google.com/drive/v2/reference/files/list\r\n\r\nOAuth Documentation: \r\n    https://developers.google.com/accounts/docs/OAuth2UserAgent\r\n    https://developers.google.com/youtube/v3/guides/authentication#OAuth2_Client_Libraries\r\n\r\nCode initially derived from: https://gist.github.com/563893\r\n-->\r\n\r\n<html>\r\n<head>\r\n    <script type=\"text/javascript\" src=\"//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js\"></script>\r\n    <script type=\"text/javascript\" charset=\"utf-8\">\r\n      $(function () {\r\n       \r\n        // parse the query string\r\n        var params = {}, queryString = location.hash.substring(1),\r\n            regex = /([^&=]+)=([^&]*)/g, m;\r\n        while (m = regex.exec(queryString)) {\r\n            params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);\r\n        }\r\n\r\n        var settings =\r\n          {\r\n            'authHost': \"accounts.google.com\"\r\n            , 'tokenHost': \"www.googleapis.com\"\r\n            , 'apiKey': '{Enter key from Google Console}'\r\n            , 'clientId': '{Enter client Id from Google Console}'\r\n            , 'scopes': 'https://www.googleapis.com/auth/plus.me' // space delimited set of scopes\r\n          };\r\n\r\n        var authHost = \"https://\" + settings.authHost;\r\n        var tokenHost = \"https://\" + settings.tokenHost;\r\n\r\n        var endUserAuthorizationEndpoint = authHost + \"/o/oauth2/auth\";\r\n        var endUserTokenValidationEndpoint = tokenHost + \"/oauth2/v1/tokeninfo\";\r\n\r\n        var plusApiEndpoint = \"https://www.googleapis.com/plus/v1/people/me/activities/collection?key=\" + settings.apiKey;\r\n\r\n        \r\n\r\n        if (params.access_token) {\r\n          $('div.authenticated').show();\r\n\r\n          $('span.token').text(params.access_token);\r\n          $('span.tokentype').text(params.token_type);\r\n          $('span.expires').text(params.expires_in);\r\n\r\n          // validate token\r\n          $.ajax({\r\n              url: endUserTokenValidationEndpoint + \"?access_token=\" + params.access_token\r\n            , success: function (response) {\r\n                console.log(response);\r\n                var container = $('span.issued_to');\r\n                if (response) {\r\n                    container.text(response.issued_to);\r\n                    $('span.audience').text(response.audience);\r\n                    $('span.scope').text(response.scope);\r\n                    $('span.expires_in').text(response.expires_in);\r\n                    $('span.access_type').text(response.access_type);\r\n                } else {\r\n                  container.text(\"An error occurred.\");\r\n                }\r\n              }\r\n          });\r\n        } else {\r\n          $('div.authenticate').show();\r\n\r\n          var authUrl = endUserAuthorizationEndpoint + \r\n            \"?response_type=token\" +\r\n            \"&client_id=\"    + settings.clientId +\r\n            \"&redirect_uri=\" + window.location +\r\n            \"&scope=\" + settings.scopes;\r\n\r\n          $(\"a.connect\").attr(\"href\", authUrl);\r\n        }\r\n\r\n        $(\".list_files\").click(function (e) {\r\n            e.preventDefault();\r\n\r\n            $.ajax({\r\n                url: plusApiEndpoint + \"&access_token=\" + params.access_token\r\n              , beforeSend: function (xhr) {\r\n                  xhr.setRequestHeader('Authorization', \"Bearer \" + params.access_token);\r\n                  xhr.setRequestHeader('Accept', \"application/json\");\r\n              }\r\n              , success: function (response) {\r\n                  console.log(response);\r\n\r\n              }\r\n            });\r\n        });\r\n      });\r\n    </script>\r\n    <style>\r\n      .hidden {\r\n        display: none;\r\n      }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"authenticate hidden\">\r\n      <a class=\"connect\" href=\"\">Connect</a>\r\n    </div>\r\n\r\n    <div class=\"authenticated hidden\">\r\n        <button class=\"list_files\">List G+ Activities</button>\r\n\r\n        <h3>Authorization Call</h3>\r\n        <p>You are using token <span class=\"token\">[...]</span></p>\r\n        <p>Token type is <span class=\"tokentype\">[...]</span></p>\r\n        <p>Expires in <span class=\"expires\">[...]</span></p>\r\n\r\n        <hr />\r\n        <h3>Token Validation Information</h3>\r\n        <p>Issed to: <span class=\"issued_to\">[...]</span></p>\r\n        <p>Audience: <span class=\"audience\">[...]</span></p>\r\n        <p>Scope: <span class=\"scope\">[...]</span></p>\r\n        <p>Expires: <span class=\"expires_in\">[...]</span></p>\r\n        <p>Access Type: <span class=\"access_type\">[...]</span></p>\r\n\r\n\r\n        <ul class=\"file_listing\"></ul>\r\n    </div>\r\n</body>\r\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":4664}]],"length":4664,"saved":false}
